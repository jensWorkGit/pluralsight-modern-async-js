{"version":3,"sources":["operation.js"],"names":[],"mappings":"AAAA,MAAM,UAAU,CAAhB;;AAEA,SAAS,cAAT,CAAwB,QAAxB,EAAkC;AAC9B,eAAW,YAAY;;AAEnB,cAAM,OAAO,cAAb;AACA,iBAAS,IAAT,EAAe,IAAf;AAEH,KALD,EAKG,OALH;AAMH;;AAED,SAAS,gBAAT,GAA4B;AACxB,UAAM,YAAY,EAAlB;;AAEA,mBAAe,UAAU,KAAV,EAAiB,MAAjB,EAAyB;AACpC,YAAG,KAAH,EAAU;AACN,sBAAU,OAAV,CAAkB,KAAlB;AACA;AACH;AACD,kBAAU,SAAV,CAAoB,MAApB;AACH,KAND;;AAQA,cAAU,YAAV,GAAyB,SAAS,YAAT,CAAsB,SAAtB,EAAiC,OAAjC,EAA0C;AAC/D,kBAAU,SAAV,GAAsB,SAAtB;AACA,kBAAU,OAAV,GAAoB,OAApB;AACH,KAHD;;AAKA,WAAO,SAAP;AACH;;AAED,SAAS,UAAT,CAAoB,IAApB,EAA0B,QAA1B,EAAoC;AAChC,eAAW,YAAY;;AAEnB,YAAG,CAAC,IAAJ,EAAU;AACN,qBAAS,IAAI,KAAJ,CAAU,8BAAV,CAAT;AACA;AACH;;AAED,cAAM,UAAU;AACZ,kBAAM;AADM,SAAhB;;AAIA,iBAAS,IAAT,EAAe,OAAf;AAEH,KAbD,EAaG,OAbH;AAcH;;AAED,SAAS,WAAT,CAAqB,IAArB,EAA2B,QAA3B,EAAqC;AACjC,eAAW,YAAY;;AAEnB,YAAG,CAAC,IAAJ,EAAU;AACN,qBAAS,IAAI,KAAJ,CAAU,+BAAV,CAAT;AACA;AACH;;AAED,cAAM,UAAU;AACZ,qBAAS,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,EAAiB,EAAjB;AADG,SAAhB;;AAIA,iBAAS,IAAT,EAAe,OAAf;AAEH,KAbD,EAaG,OAbH;AAcH;;AAED;;AAEA;AACA;AACA;;AAEA,KAAK,6CAAL,EAAoD,UAAU,IAAV,EAAgB;AAChE;AACA;AACA,UAAM,YAAY,kBAAlB;;AAEA;AACA,cAAU,YAAV,CACI,UAAU,MADd,EAEI,SAAS,KAAK,KAAL,CAFb;AAIH,CAVD","file":"operation.js","sourcesContent":["const delayms = 1;\r\n\r\nfunction getCurrentCity(callback) {\r\n    setTimeout(function () {\r\n\r\n        const city = \"New York, NY\";\r\n        callback(null, city);\r\n\r\n    }, delayms)\r\n}\r\n\r\nfunction fetchCurrentCity() {\r\n    const operation = {};\r\n\r\n    getCurrentCity(function (error, result) {\r\n        if(error) {\r\n            operation.onError(error);\r\n            return;\r\n        }\r\n        operation.onSuccess(result);\r\n    });\r\n\r\n    operation.setCallbacks = function setCallbacks(onSuccess, onError) {\r\n        operation.onSuccess = onSuccess;\r\n        operation.onError = onError;\r\n    };\r\n\r\n    return operation;\r\n}\r\n\r\nfunction getWeather(city, callback) {\r\n    setTimeout(function () {\r\n\r\n        if(!city) {\r\n            callback(new Error(\"City required to get weather\"));\r\n            return;\r\n        }\r\n\r\n        const weather = {\r\n            temp: 50\r\n        };\r\n\r\n        callback(null, weather)\r\n\r\n    }, delayms)\r\n}\r\n\r\nfunction getForecast(city, callback) {\r\n    setTimeout(function () {\r\n\r\n        if(!city) {\r\n            callback(new Error(\"City required to get forecast\"));\r\n            return;\r\n        }\r\n\r\n        const fiveDay = {\r\n            fiveDay: [60, 70, 80, 45, 50]\r\n        };\r\n\r\n        callback(null, fiveDay)\r\n\r\n    }, delayms)\r\n}\r\n\r\n//suite.only('operations')\r\n\r\n// test('fetchCurrentCity with separate success and error callbacks', function (done) {\r\n//     fetchCurrentCity(result => done(), error => done(error));\r\n// });g\r\n\r\ntest('fetchCurrentCity pass the callback later on', function (done) {\r\n    debugger;\r\n    // initiate operation\r\n    const operation = fetchCurrentCity();\r\n\r\n    // register callbacks\r\n    operation.setCallbacks(\r\n        result => done(),\r\n        error => done(error)\r\n    );\r\n});\r\n"],"sourceRoot":"C:\\Programmierung\\Pluralsight\\pluralsight-modern-async-js\\es6"}